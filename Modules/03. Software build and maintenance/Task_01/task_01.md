# Задание "Логи и метрики"

*Задания, помеченные (\*) - не обязательные, но очень рекомендуемые*

В сервис из **модуля №2** добавьте ведение логов и метрик.

## Требования к логам
- Работаем через Microsoft.Extensions.Logging + сторонние провайдеры
- Должны быть представлены логи как минимум 3 категорий: ошибки, информационны и отладочные
    - Если точки логирования будут немного искусственными - не страшно
- Используйте струтурированные логи и сгенерированные методы-хэлперы для записи таких логов
    - Продумайте, какие параметры имеет смысл зафиксировать в логах
- По провайдерам
    - Помимо стандартных провадеров добавьте запись во внешний файл
        - Какой формат файла (обычный плоский, или что-то сложнее) использовать - выберите сами
        - Провайдер также на свое усмотрение (любой сторонний)

## Требования к метрикам
- Для работы с метриками используем System.Diagnostics.Metrics
- Состав метрик на ваше усмотрение. В качестве враианта можно рассмотреть (и дополнить) такой набор:
    - Количество обработанных с момента запуска файлов
    - Среднее время обработки одного файла
    - Текущие значения timestamp/rowid для разных сущностей
    - Среднее время обработки файла
    - Среднее (максимальное?) количество измененных записей, которые выгружались в отчет
- Код работы с метриками оформляем в отдельном классе, пригодном для работы с DI
- Для демонстрации работы метрик приложите скриншот для `dotnet counters`
- (\*) Настройте сбор метрик во внешнем приложении, например, как описанный в лекции вариант Grafana + Prometheus. Дополнительные сведения и ссылки можно найти в [статье](https://learn.microsoft.com/en-us/dotnet/core/diagnostics/metrics-collection#view-metrics-in-grafana-with-opentelemetry-and-prometheus)
    - Для демонстрации - также скриншоты
- (\*) Настройте собственный сбор метрик (например, во внешний файл) через MeterListener 



